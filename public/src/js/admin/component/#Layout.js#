import React, { Component } from 'react';
import { Layout, Breadcrumb, Menu, Dropdown, Avatar, Icon } from 'antd';
import AdminAside from './AdminAside';
import { Link, withRouter } from 'react-router-dom';

const {Header, Sider, Content, Footer } = Layout;

const breadcrumbNameMap = {
  '/userInfo': '用户信息',
  '/category': '分类',
  '/categoryAdd': '分类添加',
  '/categoryEdit': '分类编辑',
  '/categoryDel': '分类删除'
}

const AvatarDrop = (
      <Menu>
        <Menu.Item key="0">
            
        </Menu.Item>
      </Menu>
);

class AdminLayoutShowLocation extends Component {
  constructor(props){
    super(props);
  }
  componentWillMount(){

  }
  render(){
    const { location } = this.props;
    const pathSnippets = location.pathname.split('/').filter(i => i);
    const extraBreadcrumbItems = pathSnippets.map((_, index) => {
      const url = `/${pathSnippets.slice(0, index + 1).join('/')}`;
      return (
        <Breadcrumb.Item key={url}>
          <Link to={url}>
            {breadcrumbNameMap[url]}
          </Link>
        </Breadcrumb.Item>
      );
    });
    const breadcrumbItems = [(
      <Breadcrumb.Item key="home">
        <Link to="/">首页</Link>
      </Breadcrumb.Item>
    )].concat(extraBreadcrumbItems);
    return(
        <Layout>
          <AdminAside/>
          <Layout>
            <Header className="headerLayout">
               <Dropdown overlay={AvatarDrop} trigger={['click']}>
                 <Avatar icon="user" style={{backgroundColor: '#87d068'}}/>
               </Dropdown>
            </Header>
            <Breadcrumb className="breadcrumb" >
                 {breadcrumbItems}
            </Breadcrumb>
            <Content className="contentContainer">
                {this.props.children}
            </Content>
            <Footer className="footerLayout">
              Extpress Blog @2017 Create by Tiankai
            </Footer>
          </Layout>
        </Layout>
    )
  }
}

const AdminLayout = withRouter(AdminLayoutShowLocation);

export default AdminLayout;
